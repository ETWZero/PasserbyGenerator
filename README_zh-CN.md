# 咸鱼人的路人甲乙丙丁皮肤生成器

这个 Blender 文件没什么特别的用途，就是一个Minecraft皮肤生成器，里面内置了一些皮肤部件节点，用户可以轻易地拖拽这些节点，将其连结在一起，最后生成一个Minecraft皮肤。

除此之外，本皮肤生成器在理论上还可以支持生成动态皮肤序列，可以支持高分辨率皮肤（128x，256x等分辨率）——前提是拥有对应特性的纹理（比如动态纹理和高分辨率的纹理）。

## 使用方法

### 如何编辑皮肤

#### 基础用法

切换到“Skin_Generator”（皮肤生成）工作区，将皮肤部件节点使用左键拖动到其上面长长的黄色曲线上，就可以将其对应的皮肤部件添加到人物身体上。如果需要将不合适的皮肤部件移除，按住Alt键+左键将该节点移动出黄色曲线即可。

皮肤部件节点分为两类，一类可以更改服装颜色，一类无法改变服装颜色。服装颜色的自定义可以通过修改Custom_Color颜色来完成。而无法改变服装颜色的皮肤部件仅能拖动到主要节点上，无法改变颜色。

合成器区域可实时更新皮肤纹理合成结果。左侧预览区无法实时更新，需要在预览区进行视角操作（比如按住中键旋转视角、使用滚轮缩放视角等），即可更新皮肤合成结果。

#### 进阶用法

##### 阴影处颜色的对比度/亮度比例

在本生成器节点中，可以自定义阴影处颜色的对比度于亮度的比例。选中一个皮肤部件，按“Tab”键展开节点树，会发现一个名为“Color_shader”的节点树，选中该节点后按“Tab”键展开，会发现一个名为“Edit Scale of Value and Saturation”的灰色框。只需要调节该节点里的数字，即可改变对比度/亮度比例。如果需要对单独的皮肤部件进行单独的调整，仅需要点击盾牌前面的数字，即可将该节点独立出来。

##### 为皮肤添加色彩纹理

每个允许自定义颜色的皮肤都可以添加色彩纹理。本皮肤生成器自带了一个颜色渐变的纹理，在皮肤部件已经连接到主合成的情况下，你可以将该节点连接至皮肤部件的“Custom_Color”节点，来预览该色彩纹理的效果。

如果需要多个色彩纹理，选中纹理节点和颜色渐变节点，按下“Shift+D”并在其他地方左键单击一下，即可将该节点复制出来。如果右键单击的画，会在原来的位置复制出一份，而不是取消复制。

### 如何进行皮肤导出

1. 按下F12，或者顶栏中点击“渲染”->“渲染图像”
2. 在弹出的渲染窗口中，在顶栏中点击“图像”->“保存”，在弹出的文件管理器中找到一个合适的位置，保存即可。

## 自定义方法

如果你有能力创作皮肤部件的话，欢迎贡献出自己的力量！

### 例程节点功能解释

目前本生成器提供了4类基础的皮肤部件的例子，和两类进阶的皮肤部件的例子。由易到难分别为：

直接放置的皮肤部件、带有蒙版的皮肤部件、带有灰度的皮肤部件、带有蒙版和灰度的皮肤部件。

直接放置的皮肤部件很好理解，只要你拥有一件合适的皮肤部件就可以了，将该例程节点的第一个皮肤文件换成自己的皮肤部件即可。

带有蒙版的皮肤部件除了上文的皮肤部件外，还需要准备一个蒙版文件。该蒙版文件用于擦除之前合成节点的纹理，以放置更上层的纹理。关于为什么这样做的原因，见下文。

带有灰度的皮肤部件，它可以通过调节自定义颜色来让该部件进行颜色变化。如果该皮肤部件全部都是灰度区域，只要将其转换为灰度（注意，不是去色处理，主流图像处理软件基本都可以做到颜色到灰度功能），删掉第二张纹理即可（注意，不是删除纹理节点，是应该点击该节点里的“X”号）；该皮肤部件应该在可变色的纹理部分进行灰度处理；只是需要额外的步骤，还需要将进行灰度处理的区域制成蒙版，将该蒙版加入到第二个图像文件节点即可。

带有蒙版和灰度的皮肤部件则是上述两种方式的结合，参见上文即可。

此外，双灰度皮肤部件则可以更改皮肤部件的两种颜色，更改的区域取决于分配的灰度区域。由此可以派生出多灰度皮肤部件。

颜色灰度控制部件可以更改亮处和暗处的颜色，同时由灰度图来控制整个纹理的颜色。

### 如何以例程节点为例，创建新的节点

1. 点击需要的节点，按下Shift+D进行复制，最后在合适的位置点击一下，即可复制完成。
2. 此时该节点名称后（或蓝白色盾牌标志前）会有一个数字“2”，点击那个数字，即可创建一个新的节点。
3. 创建完成后，将该节点重命名。对于手臂粗细不一样的情况，推荐在命名时进行特异性标注（比如Steve/Alex，Thick/Slim，粗/细等）。
4. 之后选中新建的节点，按下Alt+P键，将该皮肤部件节点与框分离。
5. 最后根据上面的自定义方法，对该节点进行自定义即可。

### 如何导出/导入节点

#### 导出

1. 新建一个文件，在顶栏单击“文件”->“追加”。
2. 在弹出的文件管理器中，找到需要导出节点的文件，在文件中找到“NodeTree”文件夹，双击进入。
3. 找到需要导出的节点，按住Ctrl或Shift进行多选，选中需要导出的节点，按下“追加”按钮即可将这些节点导出到新的文件中。
4. 保存该.blend文件。

#### 导入

基本同上。导入完成后，如果需要添加节点，可以在合成节点处Shift+A （添加节点）-> 群组中找到导入的节点，将其放置在合成节点中即可。

### 注意事项

1. 绘制皮肤时不要使用纯黑和纯白两种颜色（#FFFFFF和#000000）！因为蒙版使用了这两种颜色。如果使用这两种颜色，会导致这部分可能会被当作蒙版抹掉。解决方案是将这两种颜色的明度微调一下即可。（作者的吐槽：这里应该是作者搞出来的Bug，但却被当作特性来用了。放心，这个问题是会修复的。）
2. 蒙版的主要作用是为了防止外层皮肤遮挡住内层皮肤，因此蒙版的绘制步骤可以考虑这样进行：将内层对应的蒙版复制到外层的位置上。

## 皮肤生成器的原理

该皮肤生成器的灵感来源于一款知名的换装游戏：Gacha Life，以及一个比较著名的社交联机模组：Essential。

首先介绍一下，为什么要为皮肤部件添加蒙版。Minecraft皮肤分为两层，内层与外层。而内层与外层的纹理是放在同一个图像文件里的。这就导致会发生一种十分尴尬的情况：如果只是单纯的覆盖纹理，那么就可能会让外层已存在的纹理遮挡住内层纹理。于是就需要将外层遮挡的这部分纹理消除，蒙版应运而生。蒙版的作用就是将已存在的纹理抹掉，然后放置上新的纹理。

这个问题解决了，但是另一个问题，即自定义颜色的问题就出现了。如何做才能更换纹理的颜色呢？这里采用的方法是灰度和添加颜色的方法。将皮肤改成灰度，之后用颜色将其相乘，就可以获得效果还算可以的皮肤部件了。在此基础上，由灰度来决定此处颜色的对比度大小，颜色越深对比度相应地越高，再与前文的灰度相乘即可获得效果不错的皮肤部件了。

## 接下来将要进行的工作

1. 继续扩充皮肤部件。
1. 添加颜色纹理。（已初步完成）
2. 灰度图+颜色的皮肤部件寻找阴影效果增强的方法。（已初步完成）
2. 将色度抠像的HSVA由纯黑色更改为透明色

## 版权&分享声明

本皮肤生成器的合成节点由ETW_Zero（eric_zane@hotmail.com）创作。本皮肤生成器的皮肤纹理由ETW_Zero创作。本皮肤生成器的玩家模型由ETW_Zero创作。

本皮肤生成器与节点组，及其生成的纹理、图像文件、模型文件均由 CC BY-NC-SA 4.0 协议进行分发，唯需勿将上述文件发布至网易我的世界任何平台（包括但不限于网易我的世界论坛、网易大神、网易我的世界皮肤组件市场等平台）；唯需勿将上述文件发布至[我的世界中文论坛](www.mcbbs.net)。在此前提下，请在尊重该协议的前提下进行分享与创作。

本文件的最终保留解释权归ETW_Zero所有。

